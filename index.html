<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Wind Projects in Brazil @joaocreste</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>
body {
    overflow: hidden;
}

body * {
   -webkit-touch-callout: none;
     -webkit-user-select: none;
        -moz-user-select: none;
         -ms-user-select: none;
             user-select: none;
}

.map {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100%;
}
</style>
<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.1.0/mapbox-gl-compare.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.1.0/mapbox-gl-compare.css' type='text/css' />

<div id='before' class='map'></div>
<div id='after' class='map'></div>

<style>
.distance-container {
    position: absolute;
    top: 100px;
    left: 10px;
    z-index: 1;
}

.distance-container > * {
    background-color: rgba(0, 0, 0, 0.5);
    color: #fff;
    font-size: 11px;
    line-height: 18px;
    display: block;
    margin: 0;
    padding: 5px 10px;
    border-radius: 3px;
}
</style>

<div id='distance' class='distance-container'></div>

<script src='https://api.mapbox.com/mapbox.js/plugins/turf/v2.0.2/turf.min.js'></script>

<style>
    #menu {
        background: #fff;
        position: absolute;
        z-index: 1;
        top: 10px;
        right: 10px;
        border-radius: 3px;
        width: 120px;
        border: 1px solid rgba(0,0,0,0.4);
        font-family: 'Open Sans', sans-serif;
    }

    #menu a {
        font-size: 13px;
        color: #404040;
        display: block;
        margin: 0;
        padding: 0;
        padding: 10px;
        text-decoration: none;
        border-bottom: 1px solid rgba(0,0,0,0.25);
        text-align: center;
    }

    #menu a:last-child {
        border: none;
    }

    #menu a:hover {
        background-color: #f8f8f8;
        color: #404040;
    }

    #menu a.active {
        background-color: #3887be;
        color: #ffffff;
    }

    #menu a.active:hover {
        background: #3074a4;
    }
</style>

<nav id="menu"></nav>
<div id="combined_map"></div>

<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.min.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.css' type='text/css' />

<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoiam9hb2NyZXN0ZSIsImEiOiJjajY2d2RsaHgwMGppMnFuNjBvYWoxM3ZwIn0.LxZj6o4IGDT_dccs_FOcfQ';

// var map = new mapboxgl.Map({
//     container: 'map',
//     style: 'mapbox://styles/joaocreste/cjo1pymvu3oqq2rrrw04kv0ux',
//     zoom: 4,
//     center: [-49.317,-17.154]
// });

var map = new mapboxgl.Map({
    container: 'before',
    style: 'mapbox://styles/joaocreste/cjs513dce0z2f1fo4qyx8oob9',
    center: [-49.317,-17.154],
    zoom: 4
});

var satellite = new mapboxgl.Map({
    container: 'after',
    style: 'mapbox://styles/joaocreste/cjiyxqx9s03lc2ro06lktn1kv',
    center: [-49.317,-17.154],
    zoom: 4
});

var combined_map = new mapboxgl.Compare(map, satellite, {
    // Set this to enable comparing two maps by mouse movement:
    // mousemove: true
});

var distanceContainer = document.getElementById('distance');

// GeoJSON object to hold our measurement features
var geojson = {
    "type": "FeatureCollection",
    "features": []
};

// Used to draw a line between points
var linestring = {
    "type": "Feature",
    "geometry": {
        "type": "LineString",
        "coordinates": []
    }
};

map.on('load', function () {

// - 0. MEASURE API --------------------------------------------- //
    
    map.addSource('geojson', {
        "type": "geojson",
        "data": geojson
    });

    // Add styles to the map
    map.addLayer({
        id: 'measure-points',
        type: 'circle',
        source: 'geojson',
        paint: {
            'circle-radius': 5,
            'circle-color': '#000'
        },
        filter: ['in', '$type', 'Point']
    });
    map.addLayer({
        id: 'measure-lines',
        type: 'line',
        source: 'geojson',
        layout: {
            'line-cap': 'round',
            'line-join': 'round',
        },
        paint: {
            'line-color': '#333F50',
            'line-width': 1
        },
        filter: ['in', '$type', 'LineString']
    });

        map.on('click', function(e) {
        var features = map.queryRenderedFeatures(e.point, { layers: ['measure-points'] });

        // Remove the linestring from the group
        // So we can redraw it based on the points collection
        if (geojson.features.length > 1) geojson.features.pop();

        // Clear the Distance container to populate it with a new value
        distanceContainer.innerHTML = '';

        // If a feature was clicked, remove it from the map
        if (features.length) {
            var id = features[0].properties.id;
            geojson.features = geojson.features.filter(function(point) {
                return point.properties.id !== id;
            });
        } else {
            var point = {
                "type": "Feature",
                "geometry": {
                    "type": "Point",
                    "coordinates": [
                        e.lngLat.lng,
                        e.lngLat.lat
                    ]
                },
                "properties": {
                    "id": String(new Date().getTime())
                }
            };

            geojson.features.push(point);
        }

        if (geojson.features.length > 1) {
            linestring.geometry.coordinates = geojson.features.map(function(point) {
                return point.geometry.coordinates;
            });

            geojson.features.push(linestring);

            // Populate the distanceContainer with total distance
            var value = document.createElement('pre');
            value.textContent = 'Total distance: ' + turf.lineDistance(linestring).toLocaleString() + 'km';
            distanceContainer.appendChild(value);
        }

        map.getSource('geojson').setData(geojson);
    });



// - 1. ELECTRICAL DATA ------------------------------------------ //

// --------------------------------------------------------------- //
    map.addSource('substations', {
        type: 'vector',
        url: 'mapbox://joaocreste.79kfc9j0'
    });

    map.addLayer({
        'id': 'Substations',
        'icon-allow-overlap': true,
        'type': 'symbol',
        'source': 'substations',
        'layout': {
            'visibility': 'none',
            'icon-image': 'picnic-site-15',
            'icon-size': 1.1,
            'text-field': [
                          "step",
                          ["zoom"],
                          "",
                          6,
                          [
                            "to-string",
                            ["get", "Nome"]
                          ]
                        ],
            'text-font': [
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],
            'text-size': 10,
            'text-offset': [0, -1.2],

        },
        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 1,

        },

        'source-layer': 'Substation_Existing-23494i'
    });

// --------------------------------------------------------------- //

    map.addSource('Transmission Lines', {
        type: 'vector',
        url: 'mapbox://joaocreste.64lwqdfc'
    });

    map.addLayer({
        'id': 'Transmission Lines',
        'type': 'line',
        'source': 'Transmission Lines',
        'layout': {
                    'visibility': 'none',
                },

        'paint': {
                    'line-color': [
                      "case",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "800"],
                        true,
                        false
                      ],
                      "hsl(259, 98%, 36%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "765"],
                        true,
                        false
                      ],
                      "hsl(242, 83%, 44%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "600"],
                        true,
                        false
                      ],
                      "hsl(272, 100%, 35%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "525"],
                        true,
                        false
                      ],
                      "hsl(272, 97%, 36%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "500"],
                        true,
                        false
                      ],
                      "hsl(275, 100%, 43%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "440"],
                        true,
                        false
                      ],
                      "hsl(0, 100%, 44%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "345"],
                        true,
                        false
                      ],
                      "hsl(16, 100%, 52%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "230"],
                        true,
                        false
                      ],
                      "hsl(20, 100%, 58%)",
                      "#000000"
                    ]
        },

        'source-layer': 'TL_Existing-7irkcq'
    });

// --------------------------------------------------------------- //

// --------------------------------------------------------------- //

    map.addSource('Wind Turbines', {
        type: 'vector',
        url: 'mapbox://joaocreste.cjnd4w8va01la31oiayfur4jj-5b8a0'
    });
    map.addLayer({
        'id': 'Wind Turbines',
        'type': 'circle',
        'source': 'Wind Turbines',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'circle-radius': 2,
            'circle-color': [
							  "match",
							  ["get", "operacao"],
							  ["", "SIM"],
							  "hsl(154, 94%, 29%)",
							  "hsl(0, 94%, 34%)"
							],
			'circle-stroke-color': "hsl(0, 0%, 100%)",
			'circle-stroke-width': 0.5,
        },
        'source-layer': 'wind-turbines-BR'
    });

// --------------------------------------------------------------- //

    map.addSource('WindNames', {
        type: 'vector',
        url: 'mapbox://joaocreste.c6u9yw5u'
    });
    map.addLayer({
        'id': 'Wind Complexes',
        'type': 'symbol',
        'source': 'WindNames',
        'layout': {
            'visibility': 'none',
            'text-field':["to-string", ["get", "Name"]],
            'text-size':10

        },

        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 1, 

        },

        'source-layer': 'Parques_Elicos_Vlidos'
    });


// --------------------------------------------------------------- //

    map.addSource('Met Masts', {
        type: 'vector',
        url: 'mapbox://joaocreste.9tqubt20'
    });
    map.addLayer({
        'id': 'Met Masts',
        'type': 'symbol',
        'source': 'Met Masts',
        'layout': {
            'visibility': 'none',
            'icon-allow-overlap': true,
            'icon-image': 'embassy-11',
            'text-field': [
                          "concat",
                          [
                            "to-string",
                            ["get", "Speed"]
                          ],
                          " m/s"
                        ],
            'text-size': 9,
            'text-offset': [0,-1.5],
            'text-font': [
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],

        },

        'source-layer': 'MetMasts-bsplhe'
    });

// --------------------------------------------------------------- //



// --------------------------------------------------------------- //

// - 2. ENVIRONMENTAL CONSTRAINTS -------------------------------- //

// --------------------------------------------------------------- //

    map.addSource('Caves', {
        type: 'vector',
        url: 'mapbox://joaocreste.a4gtw23p'
    });
    map.addLayer({
        'id': 'Caves',
        'type': 'symbol',
        'source': 'Caves',
        'layout': {
            'visibility': 'none',
            'icon-image': 'cliff',
            'text-field': [
                              "step",
                              ["zoom"],
                              "",
                              10,
                              [
                                "to-string",
                                ["get", "name"]
                              ]
                            ],
            'text-size': 9,
            'text-offset': [0,-1.5],
            'text-font': [
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],

        },

        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 1,
        },

        'source-layer': 'CavesBR_201807-67mw4i'
    });

// --------------------------------------------------------------- //

    map.addSource('Indigenous Lands', {
        type: 'vector',
        url: 'mapbox://joaocreste.7pljgzin'
    });

    map.addLayer({
        'id': 'Indigenous Lands',
        'type': 'fill',
        'source': 'Indigenous Lands',
        'layout': {
            'visibility': 'none',

        },

        'paint':{
            'fill-color': "hsla(334, 96%, 31%, 0.6)",
        },

        'source-layer': 'ti_sirgas'
    });

// --------------------------------------------------------------- //

    map.addSource('Conservation Units', {
        type: 'vector',
        url: 'mapbox://joaocreste.ckpn4m4m'
    });

    map.addLayer({
        'id': 'Conservation Units',
        'type': 'fill',
        'source': 'Conservation Units',
        'layout': {
            'visibility': 'none',

        },

        'paint':{
            'fill-color': "hsla(193, 96%, 31%, 0.6)",
            'fill-outline-color':"hsl(177, 75%, 31%)",
        },

        'source-layer': 'ucstodas'
    });

// --------------------------------------------------------------- //

// - 3. LAND RELATED --------------------------------------------- //

// --------------------------------------------------------------- //

    map.addSource('SIGEF', {
        type: 'vector',
        url: 'mapbox://joaocreste.2f04truc'
    });

    map.addLayer({
        'id': 'SIGEF',
        'type': 'fill',
        'source': 'SIGEF',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': "hsla(281, 88%, 41%, 0.1)",
            'fill-outline-color': "hsl(285, 86%, 24%)", 

        },

        'source-layer': 'Sigef_Brasil_RN-0jc2aw'
    });

// --------------------------------------------------------------- //

    map.addLayer({
        'id': 'Registries',
        'type': 'symbol',
        'source': 'SIGEF',
        'layout': {
            'visibility': 'none',
            'text-field':[
                          "concat",
                          ["get", "nome_area"],
                          "\n",
                          ["get", "registro_m"],
                          "\n",
                          ["get", "status"]
                        ],
            'text-font':[
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],
            'text-size':10,

        },


        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 0.2, 

        },

        'source-layer': 'Sigef_Brasil_RN-0jc2aw'
    });

// --------------------------------------------------------------- //

    map.addSource('Rural Areas', {
        type: 'vector',
        url: 'mapbox://joaocreste.bt21uvv8'
    });

    map.addLayer({
        'id': 'Rural Areas',
        'type': 'fill',
        'source': 'Rural Areas',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': 'hsla(39, 86%, 41%, 0.3)',
            'fill-outline-color': 'hsl(36, 94%, 34%)', 

        },

        'source-layer': 'RN_AREA_IMOVEL-26c1pv'
    });

// --------------------------------------------------------------- //

    map.addSource('APPs', {
        type: 'vector',
        url: 'mapbox://joaocreste.66y7wmo8'
    });

    map.addLayer({
        'id': 'APPs',
        'type': 'fill',
        'source': 'APPs',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': "hsla(144, 39%, 47%, 0.6)",
            'fill-outline-color': "hsla(144, 39%, 47%, 0.95)",

        },

        'source-layer': 'RN_APP-8bfws0'
    });

// --------------------------------------------------------------- //


    map.addSource('Legal Reserve', {
        type: 'vector',
        url: 'mapbox://joaocreste.0r85zzcs'
    });

    map.addLayer({
        'id': 'Legal Reserve',
        'type': 'fill',
        'source': 'Legal Reserve',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': "hsla(144, 39%, 47%, 0.6)",
            'fill-outline-color': "hsla(144, 39%, 47%, 0.95)", 

        },

        'source-layer': 'RN_RESERVA_LEGAL-dkvhgm'
    });

// --------------------------------------------------------------- //

});

satellite.on('load', function () {

// - 0. MEASURE API --------------------------------------------- //

    satellite.addSource('geojson', {
        "type": "geojson",
        "data": geojson
    });

    // Add styles to the map
    satellite.addLayer({
        id: 'measure-points',
        type: 'circle',
        source: 'geojson',
        paint: {
            'circle-radius': 5,
            'circle-color': '#000'
        },
        filter: ['in', '$type', 'Point']
    });
    satellite.addLayer({
        id: 'measure-lines',
        type: 'line',
        source: 'geojson',
        layout: {
            'line-cap': 'round',
            'line-join': 'round',
        },
        paint: {
            'line-color': '#FFE699',
            'line-width': 1
        },
        filter: ['in', '$type', 'LineString']
    });

        satellite.on('click', function(e) {
        var features = satellite.queryRenderedFeatures(e.point, { layers: ['measure-points'] });

        // Remove the linestring from the group
        // So we can redraw it based on the points collection
        if (geojson.features.length > 1) geojson.features.pop();

        // Clear the Distance container to populate it with a new value
        distanceContainer.innerHTML = '';

        // If a feature was clicked, remove it from the map
        if (features.length) {
            var id = features[0].properties.id;
            geojson.features = geojson.features.filter(function(point) {
                return point.properties.id !== id;
            });
        } else {
            var point = {
                "type": "Feature",
                "geometry": {
                    "type": "Point",
                    "coordinates": [
                        e.lngLat.lng,
                        e.lngLat.lat
                    ]
                },
                "properties": {
                    "id": String(new Date().getTime())
                }
            };

            geojson.features.push(point);
        }

        if (geojson.features.length > 1) {
            linestring.geometry.coordinates = geojson.features.map(function(point) {
                return point.geometry.coordinates;
            });

            geojson.features.push(linestring);

            // Populate the distanceContainer with total distance
            var value = document.createElement('pre');
            value.textContent = 'Total distance: ' + turf.lineDistance(linestring).toLocaleString() + 'km';
            distanceContainer.appendChild(value);
        }

        satellite.getSource('geojson').setData(geojson);
    });



// - 1. ELECTRICAL DATA ------------------------------------------ //

// --------------------------------------------------------------- //
    satellite.addSource('substations', {
        type: 'vector',
        url: 'mapbox://joaocreste.79kfc9j0'
    });

    satellite.addLayer({
        'id': 'Substations',
        'type': 'symbol',
        'source': 'substations',
        'layout': {
            'visibility': 'none',
            'icon-allow-overlap': true,
            'icon-image': 'picnic-site-15',
            'icon-size': 1.1,
            'text-field': [
                          "step",
                          ["zoom"],
                          "",
                          6,
                          [
                            "to-string",
                            ["get", "Nome"]
                          ]
                        ],
            'text-font': [
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],
            'text-size': 10,
            'text-offset': [0, -1.2],

        },
        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 1,

        },

        'source-layer': 'Substation_Existing-23494i'
    });

// --------------------------------------------------------------- //

    satellite.addSource('Transmission Lines', {
        type: 'vector',
        url: 'mapbox://joaocreste.64lwqdfc'
    });

    satellite.addLayer({
        'id': 'Transmission Lines',
        'type': 'line',
        'source': 'Transmission Lines',
        'layout': {
                    'visibility': 'none',
                },

        'paint': {
                    'line-color': [
                      "case",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "800"],
                        true,
                        false
                      ],
                      "hsl(259, 98%, 36%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "765"],
                        true,
                        false
                      ],
                      "hsl(242, 83%, 44%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "600"],
                        true,
                        false
                      ],
                      "hsl(272, 100%, 35%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "525"],
                        true,
                        false
                      ],
                      "hsl(272, 97%, 36%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "500"],
                        true,
                        false
                      ],
                      "hsl(275, 100%, 43%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "440"],
                        true,
                        false
                      ],
                      "hsl(0, 100%, 44%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "345"],
                        true,
                        false
                      ],
                      "hsl(16, 100%, 52%)",
                      [
                        "match",
                        ["get", "Tensao"],
                        ["", "230"],
                        true,
                        false
                      ],
                      "hsl(20, 100%, 58%)",
                      "#000000"
                    ]
        },

        'source-layer': 'TL_Existing-7irkcq'
    });

// --------------------------------------------------------------- //

// --------------------------------------------------------------- //

    satellite.addSource('WindNames', {
        type: 'vector',
        url: 'mapbox://joaocreste.c6u9yw5u'
    });
    satellite.addLayer({
        'id': 'Wind Complexes',
        'type': 'symbol',
        'source': 'WindNames',
        'layout': {
            'visibility': 'none',
            'text-field':["to-string", ["get", "Name"]],
            'text-size':10,

        },

        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 1, 

        },

        'source-layer': 'Parques_Elicos_Vlidos'
    });

// --------------------------------------------------------------- //


    satellite.addSource('Wind Turbines', {
        type: 'vector',
        url: 'mapbox://joaocreste.cjnd4w8va01la31oiayfur4jj-5b8a0'
    });
    satellite.addLayer({
        'id': 'Wind Turbines',
        'type': 'circle',
        'source': 'Wind Turbines',
        'layout': {
            'visibility': 'none'
        },
        'paint': {
            'circle-radius': 2,
            'circle-color': [
							  "match",
							  ["get", "operacao"],
							  ["", "SIM"],
							  "hsl(154, 94%, 29%)",
							  "hsl(0, 94%, 34%)"
							],
			'circle-stroke-color': "hsl(0, 0%, 100%)",
			'circle-stroke-width': 0.5,
        },
        'source-layer': 'wind-turbines-BR'
    });

// --------------------------------------------------------------- //

    satellite.addSource('Met Masts', {
        type: 'vector',
        url: 'mapbox://joaocreste.9tqubt20'
    });
    satellite.addLayer({
        'id': 'Met Masts',
        'type': 'symbol',
        'source': 'Met Masts',
        'layout': {
            'visibility': 'none',
            'icon-allow-overlap': true,
            'icon-image': 'embassy-11',
            'text-field': [
                          "concat",
                          [
                            "to-string",
                            ["get", "Speed"]
                          ],
                          " m/s"
                        ],
            'text-size': 9,
            'text-offset': [0,-1.5],
            'text-font': [
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],

        },

        'source-layer': 'MetMasts-bsplhe'
    });

// --------------------------------------------------------------- //


// --------------------------------------------------------------- //

// - 2. ENVIRONMENTAL CONSTRAINTS -------------------------------- //

// --------------------------------------------------------------- //

    satellite.addSource('Caves', {
        type: 'vector',
        url: 'mapbox://joaocreste.a4gtw23p'
    });
    satellite.addLayer({
        'id': 'Caves',
        'type': 'symbol',
        'source': 'Caves',
        'layout': {
            'visibility': 'none',
            'icon-image': 'cliff',
            'text-field': [
                              "step",
                              ["zoom"],
                              "",
                              10,
                              [
                                "to-string",
                                ["get", "name"]
                              ]
                            ],
            'text-size': 9,
            'text-offset': [0,-1.5],
            'text-font': [
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],

        },

        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 1,
        },

        'source-layer': 'CavesBR_201807-67mw4i'
    });

// --------------------------------------------------------------- //

    satellite.addSource('Indigenous Lands', {
        type: 'vector',
        url: 'mapbox://joaocreste.7pljgzin'
    });

    satellite.addLayer({
        'id': 'Indigenous Lands',
        'type': 'fill',
        'source': 'Indigenous Lands',
        'layout': {
            'visibility': 'none',

        },

        'paint':{
            'fill-color': "hsla(334, 96%, 31%, 0.6)",
        },

        'source-layer': 'ti_sirgas'
    });

// --------------------------------------------------------------- //

    satellite.addSource('Conservation Units', {
        type: 'vector',
        url: 'mapbox://joaocreste.ckpn4m4m'
    });

    satellite.addLayer({
        'id': 'Conservation Units',
        'type': 'fill',
        'source': 'Conservation Units',
        'layout': {
            'visibility': 'none',

        },

        'paint':{
            'fill-color': "hsla(193, 96%, 31%, 0.6)",
            'fill-outline-color':"hsl(177, 75%, 31%)",
        },

        'source-layer': 'ucstodas'
    });


// --------------------------------------------------------------- //

// - 3. LAND RELATED --------------------------------------------- //

// --------------------------------------------------------------- //

    satellite.addSource('SIGEF', {
        type: 'vector',
        url: 'mapbox://joaocreste.2f04truc'
    });

    satellite.addLayer({
        'id': 'SIGEF',
        'type': 'fill',
        'source': 'SIGEF',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': "hsla(281, 88%, 41%, 0.1)",
            'fill-outline-color': "hsl(285, 86%, 24%)", 

        },

        'source-layer': 'Sigef_Brasil_RN-0jc2aw'
    });

// --------------------------------------------------------------- //

    satellite.addLayer({
        'id': 'Registries',
        'type': 'symbol',
        'source': 'SIGEF',
        'layout': {
            'visibility': 'none',
            'text-field':[
                          "concat",
                          ["get", "nome_area"],
                          "\n",
                          ["get", "registro_m"],
                          "\n",
                          ["get", "status"]
                        ],
            'text-font':[
                          "DIN Offc Pro Regular",
                          "Arial Unicode MS Regular"
                        ],
            'text-size':10,

        },


        'paint':{
            'text-halo-color': "hsl(0, 0%, 100%)",
            'text-halo-width': 0.2, 

        },

        'source-layer': 'Sigef_Brasil_RN-0jc2aw'
    });

// --------------------------------------------------------------- //

    satellite.addSource('Rural Areas', {
        type: 'vector',
        url: 'mapbox://joaocreste.bt21uvv8'
    });

    satellite.addLayer({
        'id': 'Rural Areas',
        'type': 'fill',
        'source': 'Rural Areas',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': 'hsla(39, 86%, 41%, 0.3)',
            'fill-outline-color': 'hsl(36, 94%, 34%)', 

        },

        'source-layer': 'RN_AREA_IMOVEL-26c1pv'
    });
// --------------------------------------------------------------- //


    satellite.addSource('APPs', {
        type: 'vector',
        url: 'mapbox://joaocreste.66y7wmo8'
    });

    satellite.addLayer({
        'id': 'APPs',
        'type': 'fill',
        'source': 'APPs',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': "hsla(144, 39%, 47%, 0.6)",
            'fill-outline-color': "hsla(144, 39%, 47%, 0.95)", 

        },

        'source-layer': 'RN_APP-8bfws0'
    });

// --------------------------------------------------------------- //


    satellite.addSource('Legal Reserve', {
        type: 'vector',
        url: 'mapbox://joaocreste.0r85zzcs'
    });

    satellite.addLayer({
        'id': 'Legal Reserve',
        'type': 'fill',
        'source': 'Legal Reserve',
        'layout': {
            'visibility': 'none',

        },


        'paint':{
            'fill-color': "hsla(144, 39%, 47%, 0.6)",
            'fill-outline-color': "hsla(144, 39%, 47%, 0.95)", 

        },

        'source-layer': 'RN_RESERVA_LEGAL-dkvhgm'
    });

// --------------------------------------------------------------- //

});




var map_layers = ['Registries','SIGEF','Rural Areas','APPs','Legal Reserve','Caves', 'Indigenous Lands','Conservation Units','Met Masts','Substations', 'Transmission Lines', 'Wind Complexes','Wind Turbines'];

for (var i = 0; i < map_layers.length; i++) {
    var id = map_layers[i];

    var link = document.createElement('a');
    link.href = '#';
    link.className = 'inactive';
    link.textContent = id;

    link.onclick = function (e) {
        var clickedLayer = this.textContent;
        e.preventDefault();
        e.stopPropagation();

        var visibility = satellite.getLayoutProperty(clickedLayer, 'visibility');

        if (visibility === 'visible') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
            satellite.setLayoutProperty(clickedLayer, 'visibility', 'none');
            this.className = '';
        } else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
            satellite.setLayoutProperty(clickedLayer, 'visibility', 'visible');
        }
    };

    var layers = document.getElementById('menu');
    layers.appendChild(link);
}

// --------------------------------------------------------------- //
// --------------------------------------------------------------- //
// ---------------- Geolocate the user --------------------------- //
// --------------------------------------------------------------- //
// --------------------------------------------------------------- //

map.addControl(new MapboxGeocoder({
    accessToken: mapboxgl.accessToken
}),'top-left');

 map.addControl(new mapboxgl.GeolocateControl({
     positionOptions: {
         enableHighAccuracy: true
     },
     trackUserLocation: true
 }), 'top-left');

 map.on('mousemove', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['measure-points'] });
    // UI indicator for clicking/hovering a point on the map
    map.getCanvas().style.cursor = (features.length) ? 'pointer' : 'crosshair';
});

satellite.addControl(new MapboxGeocoder({
    accessToken: mapboxgl.accessToken
}),'top-left');

 satellite.addControl(new mapboxgl.GeolocateControl({
     positionOptions: {
         enableHighAccuracy: true
     },
     trackUserLocation: true
 }), 'top-left');

 satellite.on('mousemove', function (e) {
    var features = satellite.queryRenderedFeatures(e.point, { layers: ['measure-points'] });
    // UI indicator for clicking/hovering a point on the map
    satellite.getCanvas().style.cursor = (features.length) ? 'pointer' : 'crosshair';
});

</script>

</body>
</html>
